<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <record id="module_category_final" model="ir.module.category">
            <field name="name">Сеть теннисных клубов</field>
            <field name="sequence">15</field>
        </record>

        <record id="group_final_director" model="res.groups">
            <field name="name">Директор</field>
            <field name="category_id" ref="final.module_category_final"/>
            <field name="comment">Видит и управляет всеми объектами сети спортивных центров.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_final_manager" model="res.groups">
            <field name="name">Менеджер спортивного центра</field>
            <field name="category_id" ref="final.module_category_final"/>
            <field name="comment">
                Управляет данными своего спортивного центра. Финансовые отчёты ограничены.
            </field>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_final_trainer" model="res.groups">
            <field name="name">Тренер</field>
            <field name="category_id" ref="final.module_category_final"/>
            <field name="comment">Работает только со своим расписанием и ставками.</field>
            <field name="implied_ids" eval="[(4, ref('base.group_user')), (4, ref('hr.group_hr_user'))]"/>
        </record>

        <record id="base.group_system" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('final.group_final_director'))]"/>
        </record>

        <record id="final_rule_sport_center_director" model="ir.rule">
            <field name="name">final.sport.center director access</field>
            <field name="model_id" ref="final.model_final_sport_center"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_sport_center_manager" model="ir.rule">
            <field name="name">final.sport.center manager access</field>
            <field name="model_id" ref="final.model_final_sport_center"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_sport_center_trainer" model="ir.rule">
            <field name="name">final.sport.center trainer access</field>
            <field name="model_id" ref="final.model_final_sport_center"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_tennis_court_director" model="ir.rule">
            <field name="name">final.tennis.court director access</field>
            <field name="model_id" ref="final.model_final_tennis_court"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_tennis_court_manager" model="ir.rule">
            <field name="name">final.tennis.court manager access</field>
            <field name="model_id" ref="final.model_final_tennis_court"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('sport_center_id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_tennis_court_trainer" model="ir.rule">
            <field name="name">final.tennis.court trainer access</field>
            <field name="model_id" ref="final.model_final_tennis_court"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_training_type_director" model="ir.rule">
            <field name="name">final.training.type director access</field>
            <field name="model_id" ref="final.model_final_training_type"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_training_type_manager" model="ir.rule">
            <field name="name">final.training.type manager access</field>
            <field name="model_id" ref="final.model_final_training_type"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_training_type_trainer" model="ir.rule">
            <field name="name">final.training.type trainer access</field>
            <field name="model_id" ref="final.model_final_training_type"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_center_trainer_director" model="ir.rule">
            <field name="name">final.center.trainer director access</field>
            <field name="model_id" ref="final.model_final_center_trainer"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_center_trainer_manager" model="ir.rule">
            <field name="name">final.center.trainer manager access</field>
            <field name="model_id" ref="final.model_final_center_trainer"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('sport_center_id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_center_trainer_trainer" model="ir.rule">
            <field name="name">final.center.trainer trainer access</field>
            <field name="model_id" ref="final.model_final_center_trainer"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('employee_id', '=', user.employee_id.id)]</field>
        </record>

        <record id="final_rule_trainer_rate_director" model="ir.rule">
            <field name="name">final.trainer.rate director access</field>
            <field name="model_id" ref="final.model_final_trainer_rate"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_trainer_rate_trainer" model="ir.rule">
            <field name="name">final.trainer.rate trainer access</field>
            <field name="model_id" ref="final.model_final_trainer_rate"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('trainer_id', '=', user.employee_id.id)]</field>
        </record>

        <record id="final_rule_trainer_schedule_director" model="ir.rule">
            <field name="name">final.trainer.schedule director access</field>
            <field name="model_id" ref="final.model_final_trainer_schedule"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_trainer_schedule_trainer" model="ir.rule">
            <field name="name">final.trainer.schedule trainer access</field>
            <field name="model_id" ref="final.model_final_trainer_schedule"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('trainer_id', '=', user.employee_id.id)]</field>
        </record>

        <record id="final_rule_center_training_price_director" model="ir.rule">
            <field name="name">final.center.training.price director access</field>
            <field name="model_id" ref="final.model_final_center_training_price"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_center_training_price_manager" model="ir.rule">
            <field name="name">final.center.training.price manager access</field>
            <field name="model_id" ref="final.model_final_center_training_price"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('center_id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_center_training_price_trainer" model="ir.rule">
            <field name="name">final.center.training.price trainer access</field>
            <field name="model_id" ref="final.model_final_center_training_price"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_hr_employee_manager" model="ir.rule">
            <field name="name">hr.employee manager access</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="global" eval="True"/>
        </record>
        
        <record id="final_rule_hr_employee_trainer" model="ir.rule">
            <field name="name">hr.employee trainer access own</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('user_id', '=', user.id)]</field>
        </record>

        <record id="final_rule_res_users_manager" model="ir.rule">
            <field name="name">res.users manager access</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('id', '=', user.id)]</field>
        </record>

        <record id="final_rule_res_partner_director" model="ir.rule">
            <field name="name">res.partner director access</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>
        
        <record id="final_rule_res_partner_manager" model="ir.rule">
            <field name="name">res.partner manager access</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[
                '|',
                ('id', '=', user.partner_id.id),
                '|',
                '&amp;',
                ('is_company', '=', False),
                ('telegram_user_id', '=', False),
                '&amp;',
                ('is_company', '=', False),
                ('sport_center_ids', 'in', user.employee_id.manager_center_ids.ids)
            ]</field>
        </record>

        <record id="final_rule_training_booking_director" model="ir.rule">
            <field name="name">final.training.booking director access</field>
            <field name="model_id" ref="final.model_final_training_booking"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_training_booking_manager" model="ir.rule">
            <field name="name">final.training.booking manager access</field>
            <field name="model_id" ref="final.model_final_training_booking"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('sport_center_id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_training_booking_trainer" model="ir.rule">
            <field name="name">final.training.booking trainer access</field>
            <field name="model_id" ref="final.model_final_training_booking"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('trainer_id', '=', user.employee_id.id)]</field>
        </record>

        <record id="final_rule_training_recurring_director" model="ir.rule">
            <field name="name">final.training.recurring director access</field>
            <field name="model_id" ref="final.model_final_training_recurring"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_training_recurring_manager" model="ir.rule">
            <field name="name">final.training.recurring manager access</field>
            <field name="model_id" ref="final.model_final_training_recurring"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[('sport_center_id', 'in', user.employee_id.manager_center_ids.ids)]</field>
        </record>

        <record id="final_rule_training_recurring_trainer" model="ir.rule">
            <field name="name">final.training.recurring trainer access</field>
            <field name="model_id" ref="final.model_final_training_recurring"/>
            <field name="groups" eval="[(4, ref('final.group_final_trainer'))]"/>
            <field name="domain_force">[('trainer_id', '=', user.employee_id.id)]</field>
        </record>

        <record id="final_rule_balance_transaction_director" model="ir.rule">
            <field name="name">final.balance.transaction director access</field>
            <field name="model_id" ref="final.model_final_balance_transaction"/>
            <field name="groups" eval="[(4, ref('final.group_final_director'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>

        <record id="final_rule_balance_transaction_manager" model="ir.rule">
            <field name="name">final.balance.transaction manager access</field>
            <field name="model_id" ref="final.model_final_balance_transaction"/>
            <field name="groups" eval="[(4, ref('final.group_final_manager'))]"/>
            <field name="domain_force">[(1, '=', 1)]</field>
        </record>
    </data>
</odoo>


